<div>
	<div>
		<div class="whapp-header clearfix">
			<!--
			{{#if data.id}}
				<h1>{{ i18n.callflows.directory.edit_directory }}</h1>
			{{else}}
				<h1>{{ i18n.callflows.directory.create_directory }}</h1>
			{{/if}}
			-->
			{{#unless miscSettings.hideBasicAdvancedButton}}
				<div class="buttons-right pasted view-buttons">
					<button class="btn black basic activate">{{ i18n.callflows.directory.basic }}</button>
					<button class="btn black advanced">{{ i18n.callflows.directory.advanced }}</button>
				</div>
			{{/unless}}
		</div>
	</div>
	<div>
		<ul class="tabs" data-tabs="tabs">
			<li class="active"><a href="#basic">{{ i18n.callflows.directory.basic }}</a></li>
			<li><a href="#options"><span class="icon wrench_screw"></span>{{ i18n.callflows.directory.options }}</a></li>
		</ul>
		<form id="directory-form" action="" method="post">
			<div class="pill-content">
				<div class="active basic_view" id="basic">
					<div class="clearfix">
						<h3>{{ i18n.callflows.directory.basic }}</h3>

						<label for="name">{{ i18n.callflows.directory.name }}</label>
						<div class="input">
							<input class="span4" id="name" name="name" type="text" placeholder="{{ i18n.callflows.directory.name }}" value="{{ data.name }}" rel="popover" data-content="{{ i18n.callflows.directory.name_data_content }}" required/>
						</div>
						{{#if miscSettings.embeddedTableView}}
							{{#if miscSettings.enableDirectoryCallflowFilter}}
								<hr />

								<h3>{{ i18n.callflows.directory.members }}</h3>

								<label>{{ i18n.callflows.directory.user }}</label>
								<div class="input user-callflow-select">
									<select name="select_user_id" id="select_user_id" data-placeholder="Select a user...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.users}}
											<option value="{{ id }}" id="option_user_{{ id }}">{{ first_name }} {{ last_name }}</option>
										{{/each}}
									</select>
									
									<select name="callflow_type" id="callflow_type" data-placeholder="Select a callflow type...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										<option value="callflow">Callflow</option>
										<option value="userCallflow">User Callflow</option>
										<option value="phoneOnlyCallflow">Phone Only Device</option>
										<option value="callCentreCallflow">Call Center Queue</option>
									</select>
									
									<select name="callflow_id" id="callflow_id" data-placeholder="Select a callflow...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.callflows}}
											<option value="{{ id }}" id="option_callflow_{{ id }}">
												&nbsp;
												{{#if name}}
													{{name}}&nbsp;
												{{else}}
													{{#each numbers}} {{this}}&nbsp;{{/each}}
												{{/if}}
											</option>
										{{/each}}
									</select>

									<select name="callflow_id" id="userCallflow_id" data-placeholder="Select a callflow...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.userCallflows}}
											<option value="{{ id }}" id="option_callflow_{{ id }}">
												&nbsp;
												{{#if name}}
													{{name}}&nbsp;
												{{else}}
													{{#each numbers}} {{this}}&nbsp;{{/each}}
												{{/if}}
											</option>
										{{/each}}
									</select>

									<select name="callflow_id" id="phoneOnlyCallflow_id" data-placeholder="Select a callflow...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.phoneOnlyCallflows}}
											<option value="{{ id }}" id="option_callflow_{{ id }}">
												&nbsp;
												{{#if name}}
													{{name}}&nbsp;
												{{else}}
													{{#each numbers}} {{this}}&nbsp;{{/each}}
												{{/if}}
											</option>
										{{/each}}
									</select>

									<select name="callflow_id" id="callCentreCallflow_id" data-placeholder="Select a callflow...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.callCentreCallflows}}
											<option value="{{ id }}" id="option_callflow_{{ id }}">
												&nbsp;
												{{#if name}}
													{{name}}&nbsp;
												{{else}}
													{{#each numbers}} {{this}}&nbsp;{{/each}}
												{{/if}}
											</option>
										{{/each}}
									</select>
									
									<button type="button" class="monster-button-primary add_user_div" data-toggle="button">{{ i18n.add }}</button>
								</div>
							{{else}}
								<label>{{ i18n.callflows.directory.user }}</label>
								<div class="input user-callflow-select">
									<select name="select_user_id" id="select_user_id" data-placeholder="Select a user...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.users}}
											<option value="{{ id }}" id="option_user_{{ id }}">{{ first_name }} {{ last_name }}</option>
										{{/each}}
									</select>
									<label>{{ i18n.callflows.directory.callflow }}</label>
									<select name="callflow_id" id="callflow_id" data-placeholder="Select a callflow...">
										<option value="null"></option>  <!-- Empty option for Chosen placeholder -->
										{{#each field_data.callflows}}
											<option value="{{ id }}" id="option_callflow_{{ id }}">
												&nbsp;
												{{#if name}}
													{{name}}&nbsp;
												{{else}}
													{{#each numbers}} {{this}}&nbsp;{{/each}}
												{{/if}}
											</option>
										{{/each}}
									</select>
									<button type="button" class="monster-button-primary add_user_div" data-toggle="button">{{ i18n.add }}</button>
								</div>
							{{/if}}
						{{/if}}
					</div>

					<div class="clearfix">
						<div id="tab_users">
							<div class="row row-user title">
								<div class="column first">{{ i18n.callflows.directory.user }}</div>
								<div class="column second">{{ i18n.callflows.directory.callflow }}</div>
								<div class="column third">{{ i18n.callflows.directory.remove }}</div>
							</div>
							<div class="rows">
							</div>
						</div>

						{{#unless miscSettings.embeddedTableView}}
							<div class="add_user">
								<div class="add_user_title">{{ i18n.callflows.directory.add_user }}</div>
								<div class="add_content_wrapper">
									<div class="add_user_fields">
										<ul class="controls">
											<div id="user_list_select">
												<li>
													<label>{{ i18n.callflows.directory.user }}</label>
													<select name="select_user_id" id="select_user_id">
														<option id="empty_option_user" value="empty_option_user">-- {{ i18n.callflows.directory.select }} --</option>
														{{#each field_data.users}}
															<option value="{{ id }}" id="option_user_{{ id }}">{{ first_name }} {{ last_name }}</option>
														{{/each}}
													</select>
												</li>
												<div class="clear"/>
											</div>
											<li id="callflow_li">
												</span>
												<label>{{ i18n.callflows.directory.callflow }}</label>
												<select name="callflow_id" id="callflow_id">
													<option id="empty_option_callflow" value="empty_option_callflow">-- {{ i18n.callflows.directory.select }} --</option>
													{{#each field_data.callflows}}
														<option value="{{ id }}" id="option_callflow_{{ id }}">
															&nbsp;
															{{#if name}}
																{{name}}&nbsp;
															{{else}}
																{{#each numbers}} {{this}}&nbsp;{{/each}}
															{{/if}}
														</option>
													{{/each}}
												</select>
											</li>
											<div class="clear"/>
										</ul>
									</div>
									<div class="add_user_div">
										<a class="monster-button-primary" href="javascript:void(0);" data-directory_id="{{ data.id }}">{{ i18n.add }}</a>
										<div class="clear"/>
									</div>
								</div>
							</div>
						{{/unless}}
					</div>
				</div>

				<div id="options">
					<div class="clearfix">
						<label for="min_dtmf">{{ i18n.callflows.directory.minimum_number_of_input }}</label>
						<div class="input">
							<input class="span4" id="min_dtmf" name="min_dtmf" type="text" placeholder="{{ i18n.callflows.directory.minimum_number_of_input_placeholder }}" value="{{ data.min_dtmf }}" rel="popover" data-content="{{ i18n.callflows.directory.minimum_number_of_input_data_content }}"/>
						</div>
					</div>

					<div class="clearfix">
						<label for="max_dtmf">{{ i18n.callflows.directory.max_number_of_input }}</label>
						<div class="input">
							<input class="span4" id="max_dtmf" name="max_dtmf" type="text" placeholder="{{ i18n.callflows.directory.max_number_of_input_placeholder }}" value="{{ data.max_dtmf }}" rel="popover" data-content="{{ i18n.callflows.directory.max_number_of_input_data_content }}"/>
						</div>
					</div>

					<div class="clearfix">
						<div class="input">
							<ul class="inputs-list">
								<li>
									<label>
										<span rel="popover" data-content="{{ i18n.callflows.directory.confirm_match_data_content }}">
											<input type="checkbox" id="confirm_match" name="confirm_match"{{#if data.confirm_match}} checked="checked"{{/if}} />
											<span>{{ i18n.callflows.directory.confirm_match }}</span>
										</span>
									</label>
								</li>
							</ul>
						</div>
					</div>

					<div class="clearfix">
						<label for="sort_by">{{ i18n.callflows.directory.sort_by }}</label>
						<div class="input">
							<select name="sort_by" id="sort_by" class="medium" rel="popover" data-content="{{ i18n.callflows.directory.sort_by_data_content }}">
								{{#select data.sort_by}}
									{{#each field_data.sort_by}}
										<option value="{{ @key }}">{{ this }}</option>
									{{/each}}
								{{/select}}
							</select>
						</div>
					</div>
				</div>
			</div>
		</form>
		<div class="buttons-right">
			{{#unless miscSettings.callflowButtonsWithinHeader}}
				{{#if data.id}}
					<button class="monster-button monster-button-danger directory-delete">{{ i18n.callflows.directory.delete }}</button>	
				{{/if}}
				<button class="monster-button monster-button-success directory-save">{{ i18n.callflows.directory.save }}</button>
			{{/unless}}
			{{#if miscSettings.callflowButtonsWithinHeader}}
				{{#if data.id}}
					{{#if miscSettings.popupEdit}}
						{{#unless hideAdd.directory}}
							<button class="monster-button monster-button-danger directory-delete">{{ i18n.callflows.directory.delete }}</button>
						{{/unless}}
					{{/if}}
				{{/if}}
				{{#if miscSettings.popupEdit}}
				<button class="monster-button monster-button-success directory-save">{{ i18n.callflows.directory.save }}</button>
				{{/if}}
			{{/if}}
		</div>
	</div>
</div>
